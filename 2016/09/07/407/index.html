<!doctype html>
<html lang="zh-CN">
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta content="black" name="apple-mobile-web-app-status-bar-style">
  <meta content="telephone=no" name="format-detection">
  <meta name="keywords" content="undefined">
  <meta name="description" content="互联网技术">
  <meta name="author" content="zhangyu">

  
  <title>Docker run命令的使用方法</title>
  

  <link rel="canonical" href="http://zhangyu8.me/2016/09/07/407/index.html">
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="undefined">
  <link rel="stylesheet" href="/font.css">
</head>


  <body>
    <aside class="aside">
  <nav class="aside-menu">
    <ul class="aside-list">
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-wendang"></i><a href="/index.html" class="aside-menu-link" title="首页">首页</a></li>
        
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-wendang1"></i><a href="/archives/index.html" class="aside-menu-link" title="所有文章">所有文章</a></li>
        
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-biaoqian1"></i><a href="/tags/index.html" class="aside-menu-link" title="分类标签">分类标签</a></li>
        
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-lianjie"></i><a href="/links/index.html" class="aside-menu-link" title="友情链接">友情链接</a></li>
        
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-guanyu"></i><a href="/about/index.html" class="aside-menu-link" title="关于">关于</a></li>
        
      
    </ul>
  </nav>

  <article class="aside-show">
    
    <div class="aside-show-wrapper">
      <figure class="aside-avatar">
        <img src="/img/avatar.png" alt="avatar" class="aside-avatar-img">
        <figcaption class="aside-avatar-caption">
          大雨哥
          
          <strong class="aside-avatar-STRONG">个人博客</strong>
          
        </figcaption>
      </figure>
      <p class="aside-show-description">互联网技术/架构/团队</p>
    </div>
  </article>
</aside>


    <article class="main" id="main">
      <article class="post min-height">
  
  <header class="post-header">
    
    <h1 class="post-title">Docker run命令的使用方法</h1>
    <p class="post-meta">
      <span class="post-time">2016-09-07</span>
      
      <a href="/categories/docker/" title="docker" class="post-categories">docker</a>
      
      
      <a href="/tags/docker/" " title="docker" class="post-tags"><i class="post-tags-icon iconfont icon-biaoqian"></i>docker</a>
      
    </p>
    
  </header>
  <div class="post-content"><p><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">Docker会在隔离的容器中运行进程。当运行<span style="-ms-word-wrap: break-word;">&nbsp;</span></span><code>docker run</code><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">命令时，Docker会启动一个进程，并为这个进程分配其独占的文件系统、网络资源和以此进程为根进程的进程组。在容器启动时，</span><a href="https://docs.docker.com/terms/image/#image-def" target="_blank" rel="noopener">镜像</a><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">可能已经定义了要运行的二进制文件、暴露的网络端口等，但是用户可以通过</span><code>docker run</code><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">命令重新定义（译者注：docker run可以控制一个容器运行时的行为，它可以覆盖</span><code>docker build</code><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">在构建镜像时的一些默认配置），这也是为什么</span><code>run</code><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">命令相比于其它命令有如此多的参数的原因。</span></p>
<p>####<br>    命令格式</p>
<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;最基本的&lt;/span&gt;`docker run`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;命令的格式如下：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;[OPTIONS]&nbsp;IMAGE[:TAG]&nbsp;[COMMAND]&nbsp;[ARG...]
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果需要查看[OPTIONS]的详细使用说明，请参考Docker关于OPTIONS的&lt;/span&gt;[章节](https://docs.docker.com/reference/commandline/cli/#option-types)&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;。这里仅简要介绍Run所使用到的参数。OPTIONS总起来说可以分为两类：&lt;/span&gt;
</code></pre><ol>
<li><p>设置运行方式：</p>
<pre><code>*   决定容器的运行方式，前台执行还是后台执行；
</code></pre><ul>
<li>设置containerID；</li>
<li>设置网络参数；</li>
<li>设置容器的CPU和内存参数；</li>
<li><ul>
<li>设置权限和LXC参数；</li>
</ul>
</li>
</ul>
</li>
<li><p>设置镜像的默认资源，也就是说用户可以使用该命令来覆盖在镜像构建时的一些默认配置。</p>
<p><code>docker run [OPTIONS]</code><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">可以让用户完全控制容器的生命周期，并允许用户覆盖执行</span><code>docker build</code><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">时所设定的参数，甚至也可以修改本身由Docker所控制的内核级参数。</span></p>
</li>
</ol>
<p>####<br>    Operator exclusive options</p>
<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;当执行&lt;/span&gt;`docker run`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;时可以设置以下参数：&lt;/span&gt;
</code></pre><ul>
<li><p>Detached vs Foreground</p>
<pre><code>*   Detached (-d)
</code></pre><ul>
<li><ul>
<li>Foreground</li>
</ul>
</li>
</ul>
</li>
<li><p>Container Identification</p>
<pre><code>*   Name (--name)
</code></pre><ul>
<li><ul>
<li>PID Equivalent</li>
</ul>
</li>
</ul>
</li>
<li>IPC Setting</li>
<li>Network Settings</li>
<li>Clean Up (–rm)</li>
<li>Runtime Constraints on CPU and Memory</li>
<li><p>Runtime Privilege, Linux Capabilities, and LXC Configuration</p>
<p><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">接下来我们依次进行介绍。</span></p>
<p><strong>Detached vs foreground</strong></p>
<p><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">当我们启动一个容器时，首先需要确定这个容器是运行在前台还是运行在后台。</span></p>
</li>
</ul>
<pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
-d=false:&nbsp;Detached&nbsp;mode:&nbsp;Run&nbsp;container&nbsp;in&nbsp;the&nbsp;background,&nbsp;print&nbsp;new&nbsp;container&nbsp;id
</pre>

<pre><code>**Detached (-d)**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果在&lt;/span&gt;`docker run`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;后面追加&lt;/span&gt;`-d=true`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;或者&lt;/span&gt;`-d`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;，那么容器将会运行在后台模式。此时所有I/O数据只能通过网络资源或者共享卷组来进行交互。因为容器不再监听你执行&lt;/span&gt;`docker run`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;的这个终端命令行窗口。但你可以通过执行&lt;/span&gt;`docker attach`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;来重新附着到该容器的回话中。需要注意的是，容器运行在后台模式下，是不能使用&lt;/span&gt;`--rm`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;选项的。&lt;/span&gt;

**Foregroud**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;在前台模式下（不指定&lt;/span&gt;`-d`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;参数即可），Docker会在容器中启动进程，同时将当前的命令行窗口附着到容器的标准输入、标准输出和标准错误中。也就是说容器中所有的输出都可以在当前窗口中看到。甚至它都可以虚拟出一个TTY窗口，来执行信号中断。这一切都是可以配置的：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
-a=[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　　　&nbsp;:&nbsp;Attach&nbsp;to&nbsp;`STDIN`,&nbsp;`STDOUT`&nbsp;and/or&nbsp;`STDERR`
-t=false&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　&nbsp;&nbsp;:&nbsp;Allocate&nbsp;a&nbsp;pseudo-tty
--sig-proxy=true　:&nbsp;Proxify&nbsp;all&nbsp;received&nbsp;signal&nbsp;to&nbsp;the&nbsp;process&nbsp;(non-TTY&nbsp;mode&nbsp;only)
-i=false&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　&nbsp;&nbsp;:&nbsp;Keep&nbsp;STDIN&nbsp;open&nbsp;even&nbsp;if&nbsp;not&nbsp;attached
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果在执行run命令时没有指定&lt;/span&gt;`-a`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;参数，那么Docker默认会挂载所有标准数据流，包括输入输出和错误，你可以单独指定挂载哪个标准流。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-a&nbsp;stdin&nbsp;-a&nbsp;stdout&nbsp;-i&nbsp;-t&nbsp;ubuntu&nbsp;/bin/bash
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果要进行交互式操作（例如Shell脚本），那我们必须使用&lt;/span&gt;`-i -t`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;参数同容器进行数据交互。但是当通过管道同容器进行交互时，就不需要使用&lt;/span&gt;`-t`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;参数，例如下面的命令：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
echo&nbsp;test&nbsp;|&nbsp;docker&nbsp;run&nbsp;-i&nbsp;busybox&nbsp;cat
</pre>

<pre><code>**容器识别**

**Name（--name）**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;可以通过三种方式为容器命名：&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;　　&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;1\. 使用UUID长命名（&amp;quot;f78375b1c487e03c9438c729345e54db9d20cfa2ac1fc3494b6eb60872e74778&amp;quot;）&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;2\. 使用UUID短命令（&amp;quot;f78375b1c487&amp;quot;）&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;3\. 使用Name(&amp;quot;evil_ptolemy&amp;quot;)&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;这个UUID标示是由Docker deamon生成的。如果你在执行&lt;/span&gt;`docker run`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;时没有指定&lt;/span&gt;`--name`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;，那么deamon会自动生成一个随机字符串UUID。但是对于一个容器来说有个name会非常方便，当你需要连接其它容器时或者类似需要区分其它容器时，使用容器名称可以简化操作。无论容器运行在前台或者后台，这个名字都是有效的。&lt;/span&gt;

**PID equivalent**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果在使用Docker时有自动化的需求，你可以将containerID输出到指定的文件中（PIDfile），类似于某些应用程序将自身ID输出到文件中，方便后续脚本操作。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
--cidfile=&quot;&quot;:&nbsp;Write&nbsp;the&nbsp;container&nbsp;ID&nbsp;to&nbsp;the&nbsp;file
</pre>

<pre><code>**Image[:tag]**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;当一个镜像的名称不足以分辨这个镜像所代表的含义时，你可以通过tag将版本信息添加到run命令中，以执行特定版本的镜像。例如:&lt;span style=&quot;-ms-word-wrap: break-word;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;`docker run ubuntu:14.04`

**IPC Settings**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;默认情况下，所有容器都开启了IPC命名空间。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
--ipc=&quot;&quot;&nbsp;&nbsp;:&nbsp;Set&nbsp;the&nbsp;IPC&nbsp;mode&nbsp;for&nbsp;the&nbsp;container,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;container:&lt;name|id&gt;&#39;:&nbsp;reuses&nbsp;another&nbsp;container&#39;s&nbsp;IPC&nbsp;namespace
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;host&#39;:&nbsp;use&nbsp;the&nbsp;host&#39;s&nbsp;IPC&nbsp;namespace&nbsp;inside&nbsp;the&nbsp;container
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;IPC（POSIX/SysV IPC）命名空间提供了相互隔离的命名共享内存、信号灯变量和消息队列。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;共享内存可以提高进程数据的交互速度。共享内存一般用在数据库和高性能应用（C/OpenMPI、C++/using boost libraries）上或者金融服务上。如果需要容器中部署上述类型的应用，那么就应该在多个容器直接使用共享内存了。&lt;/span&gt;

**Network settings**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;默认情况下，所有的容器都开启了网络接口，同时可以接受任何外部的数据请求。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
--dns=[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Set&nbsp;custom&nbsp;dns&nbsp;servers&nbsp;for&nbsp;the&nbsp;container
--net=&quot;bridge&quot;&nbsp;&nbsp;&nbsp;:&nbsp;Set&nbsp;the&nbsp;Network&nbsp;mode&nbsp;for&nbsp;the&nbsp;container
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;bridge&#39;:&nbsp;creates&nbsp;a&nbsp;new&nbsp;network&nbsp;stack&nbsp;for&nbsp;the&nbsp;container&nbsp;on&nbsp;the&nbsp;docker&nbsp;bridge
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;none&#39;:&nbsp;no&nbsp;networking&nbsp;for&nbsp;this&nbsp;container
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;container:&lt;name|id&gt;&#39;:&nbsp;reuses&nbsp;another&nbsp;container&nbsp;network&nbsp;stack
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;host&#39;:&nbsp;use&nbsp;the&nbsp;host&nbsp;network&nbsp;stack&nbsp;inside&nbsp;the&nbsp;container
--add-host=&quot;&quot;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Add&nbsp;a&nbsp;line&nbsp;to&nbsp;/etc/hosts&nbsp;(host:IP)
--mac-address=&quot;&quot;&nbsp;:&nbsp;Sets&nbsp;the&nbsp;container&#39;s&nbsp;Ethernet&nbsp;device&#39;s&nbsp;MAC&nbsp;address
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;你可以通过&lt;/span&gt;`docker run --net none`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;来关闭网络接口，此时将关闭所有网络数据的输入输出，你只能通过STDIN、STDOUT或者files来完成I/O操作。默认情况下，容器使用主机的DNS设置，你也可以通过&lt;/span&gt;`--dns`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;来覆盖容器内的DNS设置。同时Docker为容器默认生成一个MAC地址，你可以通过&lt;/span&gt;`--mac-address 12:34:56:78:9a:bc`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;来设置你自己的MAC地址。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;Docker支持的网络模式有：&lt;/span&gt;
</code></pre><ul>
<li>none。关闭容器内的网络连接</li>
<li>bridge。通过veth接口来连接容器，<em>默认配置</em>。</li>
<li>host。允许容器使用host的网络堆栈信息。 注意：这种方式将允许容器访问host中类似D-BUS之类的系统服务，所以认为是不安全的。</li>
<li><p>container。使用另外一个容器的网络堆栈信息。<span style="-ms-word-wrap: break-word;">&nbsp;</span>　　</p>
<pre><code>**None模式**
</code></pre><p><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">将网络模式设置为none时，这个容器将不允许访问任何外部router。这个容器内部只会有一个loopback接口，而且不存在任何可以访问外部网络的router。</span></p>
<p><strong>Bridge模式</strong></p>
<p><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">Docker默认会将容器设置为bridge模式。此时在主机上面将会存在一个docker0的网络接口，同时会针对容器创建一对veth接口。其中一个veth接口是在主机充当网卡桥接作用，另外一个veth接口存在于容器的命名空间中，并且指向容器的loopback。Docker会自动给这个容器分配一个IP，并且将容器内的数据通过桥接转发到外部。</span></p>
<p><strong>Host模式</strong></p>
<p><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">当网络模式设置为host时，这个容器将完全共享host的网络堆栈。host所有的网络接口将完全对容器开放。容器的主机名也会存在于主机的hostname中。这时，容器所有对外暴露的端口和对其它容器的连接，将完全失效。</span></p>
<p><strong>Container模式</strong></p>
<p><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">当网络模式设置为Container时，这个容器将完全复用另外一个容器的网络堆栈。同时使用时这个容器的名称必须要符合下面的格式：–net container:&lt;name|id&gt;.</span></p>
<p><span style="color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &quot;Helvetica Neue&quot;, STHeiti, &quot;Microsoft YaHei&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">比如当前有一个绑定了本地地址localhost的Redis容器。如果另外一个容器需要复用这个网络堆栈，则需要如下操作：</span></p>
</li>
</ul>
<pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-d&nbsp;--name&nbsp;redis&nbsp;example/redis&nbsp;--bind&nbsp;127.0.0.1
$&nbsp;#&nbsp;use&nbsp;the&nbsp;redis&nbsp;container&#39;s&nbsp;network&nbsp;stack&nbsp;to&nbsp;access&nbsp;localhost
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;--rm&nbsp;-ti&nbsp;--net&nbsp;container:redis&nbsp;example/redis-cli&nbsp;-h&nbsp;127.0.0.1
</pre>

<pre><code>**管理/etc/hosts**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;/etc/hosts文件中会包含容器的hostname信息，我们也可以使用&lt;/span&gt;`--add-host`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;这个参数来动态添加/etc/hosts中的数据。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;/docker&nbsp;run&nbsp;-ti&nbsp;--add-host&nbsp;db-static:86.75.30.9&nbsp;ubuntu&nbsp;cat&nbsp;/etc/hosts
172.17.0.22&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;09d03f76bf2c
fe00::0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip6-localnet
ff00::0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip6-mcastprefix
ff02::1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip6-allnodes
ff02::2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip6-allrouters
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localhost
::1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localhost&nbsp;ip6-localhost&nbsp;ip6-loopback
86.75.30.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db-static
</pre>

<pre><code>**Clean up (--rm)**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;默认情况下，每个容器在退出时，它的文件系统也会保存下来，这样一方面调试会方便些，因为你可以通过查看日志等方式来确定最终状态。另外一方面，你也可以保存容器所产生的数据。但是当你仅仅需要短暂的运行一个容器，并且这些数据不需要保存，你可能就希望Docker能在容器结束时自动清理其所产生的数据。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;这个时候你就需要--rm这个参数了。&lt;span style=&quot;-ms-word-wrap: break-word;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;**注意：--rm 和 -d不能共用！**
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
--rm=false:&nbsp;Automatically&nbsp;remove&nbsp;the&nbsp;container&nbsp;when&nbsp;it&nbsp;exits&nbsp;(incompatible&nbsp;with&nbsp;-d)
</pre>

<pre><code>**Security configuration**
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
--security-opt=&quot;label:user:USER&quot;&nbsp;&nbsp;&nbsp;:&nbsp;Set&nbsp;the&nbsp;label&nbsp;user&nbsp;for&nbsp;the&nbsp;container
--security-opt=&quot;label:role:ROLE&quot;&nbsp;&nbsp;&nbsp;:&nbsp;Set&nbsp;the&nbsp;label&nbsp;role&nbsp;for&nbsp;the&nbsp;container
--security-opt=&quot;label:type:TYPE&quot;&nbsp;&nbsp;&nbsp;:&nbsp;Set&nbsp;the&nbsp;label&nbsp;type&nbsp;for&nbsp;the&nbsp;container
--security-opt=&quot;label:level:LEVEL&quot;&nbsp;:&nbsp;Set&nbsp;the&nbsp;label&nbsp;level&nbsp;for&nbsp;the&nbsp;container
--security-opt=&quot;label:disable&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Turn&nbsp;off&nbsp;label&nbsp;confinement&nbsp;for&nbsp;the&nbsp;container
--secutity-opt=&quot;apparmor:PROFILE&quot;&nbsp;&nbsp;:&nbsp;Set&nbsp;the&nbsp;apparmor&nbsp;profile&nbsp;to&nbsp;be&nbsp;applied&nbsp;&nbsp;to&nbsp;the&nbsp;container
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;你可以通过&lt;/span&gt;`--security-opt`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;修改容器默认的schema标签。比如说，对于一个MLS系统来说（译者注：MLS应该是指Multiple Listing System），你可以指定MCS/MLS级别。使用下面的命令可以在不同的容器间分享内容：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
#docker&nbsp;run&nbsp;--security-opt&nbsp;label:level:s0:c100,c200&nbsp;-i&nbsp;-t&nbsp;fedora&nbsp;bash
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果是MLS系统，则使用下面的命令：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
#&nbsp;docker&nbsp;run&nbsp;--security-opt&nbsp;label:level:TopSecret&nbsp;-i&nbsp;-t&nbsp;rhel7&nbsp;bash
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;使用下面的命令可以在容器内禁用安全策略：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
#&nbsp;docker&nbsp;run&nbsp;--security-opt&nbsp;label:disable&nbsp;-i&nbsp;-t&nbsp;fedora&nbsp;bash
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果你需要在容器内执行更为严格的安全策略，那么你可以为这个容器指定一个策略替代，比如你可以使用下面的命令来指定容器只监听Apache端口：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
#&nbsp;docker&nbsp;run&nbsp;--security-opt&nbsp;label:type:svirt_apache_t&nbsp;-i&nbsp;-t&nbsp;centos&nbsp;bash
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;注意：此时，你的主机环境中必须存在一个名为svirt_apache_t的安全策略。&lt;/span&gt;

**Runtime constraints on CPU and memory**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;下面的参数可以用来调整容器内的性能。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
-m=&quot;&quot;:&nbsp;Memory&nbsp;limit&nbsp;(format:&nbsp;&lt;number&gt;&lt;optional&nbsp;unit&gt;,&nbsp;where&nbsp;unit&nbsp;=&nbsp;b,&nbsp;k,&nbsp;m&nbsp;or&nbsp;g)
-c=0&nbsp;:&nbsp;CPU&nbsp;shares&nbsp;(relative&nbsp;weight)
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;通过&lt;/span&gt;`docker run -m`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;可以调整容器所使用的内存资源。如果主机支持swap内存，那么可以使用&lt;/span&gt;`-m`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;可以设定比主机物理内存还大的值。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;同样，通过&lt;/span&gt;`-c`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;可以调整容器的CPU优先级。默认情况下，所有的容器拥有相同的CPU优先级和CPU调度周期，但你可以通过Docker来通知内核给予某个或某几个容器更多的CPU计算周期。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;比如，我们使用&lt;/span&gt;`-c`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;或者&lt;/span&gt;`--cpu-shares =0`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;启动了C0、C1、C2三个容器，使用-c/--cpu-shares=512启动了C3容器。这时，C0、C1、C2可以100%的使用CPU资源（1024），但C3只能使用50%的CPU资源（512）。如果这个主机的操作系统是时序调度类型的，每个CPU时间片是100微秒，那么C0、C1、C2将完全使用掉这100微秒，而C3只能使用50微秒。&lt;/span&gt;

**Runtime privilege, Linux capabilities, and LXC configuration**
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
--cap-add:&nbsp;Add&nbsp;Linux&nbsp;capabilities
--cap-drop:&nbsp;Drop&nbsp;Linux&nbsp;capabilities
--privileged=false:&nbsp;Give&nbsp;extended&nbsp;privileges&nbsp;to&nbsp;this&nbsp;container
--device=[]:&nbsp;Allows&nbsp;you&nbsp;to&nbsp;run&nbsp;devices&nbsp;inside&nbsp;the&nbsp;container&nbsp;without&nbsp;the&nbsp;--privileged&nbsp;flag.
--lxc-conf=[]:&nbsp;(lxc&nbsp;exec-driver&nbsp;only)&nbsp;Add&nbsp;custom&nbsp;lxc&nbsp;options&nbsp;--lxc-conf=&quot;lxc.cgroup.cpuset.cpus&nbsp;=&nbsp;0,1&quot;
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;默认情况下，Docker的容器是没有特权的，例如不能在容器中再启动一个容器。这是因为默认情况下容器是不能访问任何其它设备的。但是通过&amp;quot;privileged&amp;quot;，容器就拥有了访问任何其它设备的权限。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;当操作者执行&lt;/span&gt;`docker run --privileged`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;时，Docker将拥有访问主机所有设备的权限，同时Docker也会在apparmor或者selinux做一些设置，使容器可以容易的访问那些运行在容器外部的设备。你可以访问&lt;/span&gt;[Docker博客](http://blog.docker.com/2013/09/docker-can-now-run-within-docker/)&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;来获取更多关于--privileged的用法。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;同时，你也可以限制容器只能访问一些指定的设备。下面的命令将允许容器只访问一些特定设备：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;--device=/dev/snd:/dev/snd&nbsp;...
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;　　默认情况下，容器拥有对设备的读、写、创建设备文件的权限。使用&lt;/span&gt;`:rwm`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;来配合&lt;/span&gt;`--device`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;，你可以控制这些权限。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
　$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;--device=/dev/sda:/dev/xvdc&nbsp;--rm&nbsp;-it&nbsp;ubuntu&nbsp;fdisk&nbsp;&nbsp;/dev/xvdc

Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;q
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;--device=/dev/sda:/dev/xvdc:r&nbsp;--rm&nbsp;-it&nbsp;ubuntu&nbsp;fdisk&nbsp;&nbsp;/dev/xvdc
You&nbsp;will&nbsp;not&nbsp;be&nbsp;able&nbsp;to&nbsp;write&nbsp;the&nbsp;partition&nbsp;table.

Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;q

$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;--device=/dev/sda:/dev/xvdc:w&nbsp;--rm&nbsp;-it&nbsp;ubuntu&nbsp;fdisk&nbsp;&nbsp;/dev/xvdc
&nbsp;&nbsp;&nbsp;&nbsp;crash....

$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;--device=/dev/sda:/dev/xvdc:m&nbsp;--rm&nbsp;-it&nbsp;ubuntu&nbsp;fdisk&nbsp;&nbsp;/dev/xvdc
fdisk:&nbsp;unable&nbsp;to&nbsp;open&nbsp;/dev/xvdc:&nbsp;Operation&nbsp;not&nbsp;permitted
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;使用&lt;/span&gt;`--cap-add`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;和&lt;/span&gt;`--cap-drop`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;，配合&lt;/span&gt;`--privileged`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;，你可以更细致的控制人哦怒气。默认使用这两个参数的情况下，容器拥有一系列的内核修改权限，这两个参数都支持&lt;/span&gt;`all`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;值，如果你想让某个容器拥有除了MKNOD之外的所有内核权限，那么可以执行下面的命令：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;--cap-add=ALL&nbsp;--cap-drop=MKNOD&nbsp;...
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果需要修改网络接口数据，那么就建议使用&lt;/span&gt;`--cap-add=NET_ADMIN`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;，而不是使用&lt;/span&gt;`--privileged`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;docker&nbsp;run&nbsp;-t&nbsp;-i&nbsp;--rm&nbsp;&nbsp;ubuntu:14.04&nbsp;ip&nbsp;link&nbsp;add&nbsp;dummy0&nbsp;type&nbsp;dummy
RTNETLINK&nbsp;answers:&nbsp;Operation&nbsp;not&nbsp;permitted
$&nbsp;docker&nbsp;run&nbsp;-t&nbsp;-i&nbsp;--rm&nbsp;--cap-add=NET_ADMIN&nbsp;ubuntu:14.04&nbsp;ip&nbsp;link&nbsp;add&nbsp;dummy0&nbsp;type&nbsp;dummy
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果要挂载一个FUSE文件系统，那么就需要&lt;/span&gt;`--cap-add`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;和&lt;/span&gt;`--device`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;了。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;docker&nbsp;run&nbsp;--rm&nbsp;-it&nbsp;--cap-add&nbsp;SYS_ADMIN&nbsp;sshfs&nbsp;sshfs&nbsp;sven@10.10.10.20:/home/sven&nbsp;/mnt
fuse:&nbsp;failed&nbsp;to&nbsp;open&nbsp;/dev/fuse:&nbsp;Operation&nbsp;not&nbsp;permitted
$&nbsp;docker&nbsp;run&nbsp;--rm&nbsp;-it&nbsp;--device&nbsp;/dev/fuse&nbsp;sshfs&nbsp;sshfs&nbsp;sven@10.10.10.20:/home/sven&nbsp;/mnt
fusermount:&nbsp;mount&nbsp;failed:&nbsp;Operation&nbsp;not&nbsp;permitted
$&nbsp;docker&nbsp;run&nbsp;--rm&nbsp;-it&nbsp;--cap-add&nbsp;SYS_ADMIN&nbsp;--device&nbsp;/dev/fuse&nbsp;sshfs
#&nbsp;sshfs&nbsp;sven@10.10.10.20:/home/sven&nbsp;/mnt
The&nbsp;authenticity&nbsp;of&nbsp;host&nbsp;&#39;10.10.10.20&nbsp;(10.10.10.20)&#39;&nbsp;can&#39;t&nbsp;be&nbsp;established.
ECDSA&nbsp;key&nbsp;fingerprint&nbsp;is&nbsp;25:34:85:75:25:b0:17:46:05:19:04:93:b5:dd:5f:c6.
Are&nbsp;you&nbsp;sure&nbsp;you&nbsp;want&nbsp;to&nbsp;continue&nbsp;connecting&nbsp;(yes/no)?&nbsp;yes
sven@10.10.10.20&#39;s&nbsp;password:
root@30aa0cfaf1b5:/#&nbsp;ls&nbsp;-la&nbsp;/mnt/src/docker
total&nbsp;1516
drwxrwxr-x&nbsp;1&nbsp;1000&nbsp;1000&nbsp;&nbsp;&nbsp;4096&nbsp;Dec&nbsp;&nbsp;4&nbsp;06:08&nbsp;.
drwxrwxr-x&nbsp;1&nbsp;1000&nbsp;1000&nbsp;&nbsp;&nbsp;4096&nbsp;Dec&nbsp;&nbsp;4&nbsp;11:46&nbsp;..
-rw-rw-r--&nbsp;1&nbsp;1000&nbsp;1000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;Oct&nbsp;&nbsp;8&nbsp;00:09&nbsp;.dockerignore
-rwxrwxr-x&nbsp;1&nbsp;1000&nbsp;1000&nbsp;&nbsp;&nbsp;&nbsp;464&nbsp;Oct&nbsp;&nbsp;8&nbsp;00:09&nbsp;.drone.yml
drwxrwxr-x&nbsp;1&nbsp;1000&nbsp;1000&nbsp;&nbsp;&nbsp;4096&nbsp;Dec&nbsp;&nbsp;4&nbsp;06:11&nbsp;.git
-rw-rw-r--&nbsp;1&nbsp;1000&nbsp;1000&nbsp;&nbsp;&nbsp;&nbsp;461&nbsp;Dec&nbsp;&nbsp;4&nbsp;06:08&nbsp;.gitignore
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果Docker守护进程在启动时选择了&lt;/span&gt;`lxc`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;&lt;span style=&quot;-ms-word-wrap: break-word;&quot;&gt;&amp;nbsp;&lt;/span&gt;lxc-driver（&lt;/span&gt;`docker -d --exec-driver=lxc`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;），那么就可以使用&lt;/span&gt;`--lxc-conf`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;来设定LXC参数。但需要注意的是，未来主机上的Docker deamon有可能不会使用LXC，所以这些参数有可能会包含一些没有实现的配置功能。这意味着，用户在操作这些参数时必须要十分熟悉LXC。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;特别注意：当你使用&lt;/span&gt;`--lxc-conf`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;修改容器参数后，Docker deamon将不再管理这些参数，那么用户必须自行进行管理。比如说，你使用&lt;/span&gt;`--lxc-conf`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;修改了容器的IP地址，那么在/etc/hosts里面是不会自动体现的，需要你自行维护。&lt;/span&gt;

**Overriding Dockerfile image defaults**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;　　当开发者使用&lt;/span&gt;[Dockerfile](https://docs.docker.com/reference/builder/#dockerbuilder)&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;进行build或者使用commit提交容器时，开发人员可以设定一些镜像默认参数。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;这些参数中，有四个是无法被覆盖的：FROM、MAINTAINER、RUN和ADD，其余参数都可以通过&lt;/span&gt;`docker run`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;进行覆盖。我们将介绍如何对这些参数进行覆盖。&lt;/span&gt;
</code></pre><ul>
<li>CMD (Default Command or Options)</li>
<li>ENTRYPOINT (Default Command to Execute at Runtime)</li>
<li>EXPOSE (Incoming Ports)</li>
<li>ENV (Environment Variables)</li>
<li>VOLUME (Shared Filesystems)</li>
<li>USER</li>
<li><p>WORKDIR<span style="-ms-word-wrap: break-word;">&nbsp;</span></p>
<p><strong>CMD (default command or options)</strong></p>
</li>
</ul>
<pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;[OPTIONS]&nbsp;IMAGE[:TAG]&nbsp;[COMMAND]&nbsp;[ARG...]
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;这个命令中的COMMAND部分是可选的。因为这个IMAGE在build时，开发人员可能已经设定了默认执行的命令。作为操作人员，你可以使用上面命令中新的command来覆盖旧的command。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果镜像中设定了ENTRYPOINT，那么命令中的CMD也可以作为参数追加到ENTRYPOINT中。&lt;/span&gt;

**ENTRYPOINT (default command to execute at runtime)**
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
--entrypoint=&quot;&quot;:&nbsp;Overwrite&nbsp;the&nbsp;default&nbsp;entrypoint&nbsp;set&nbsp;by&nbsp;the&nbsp;image
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;这个ENTRYPOINT和COMMAND类似，它指定了当容器执行时，需要启动哪些进程。相对COMMAND而言，ENTRYPOINT是很难进行覆盖的，这个ENTRYPOINT可以让容器设定默认启动行为，所以当容器启动时，你可以执行任何一个二进制可执行程序。你也可以通过COMMAND为ENTRYPOINT传递参数。但当你需要在容器中执行其它进程时，你就可以指定其它ENTRYPOINT了。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;下面就是一个例子，容器可以在启动时自动执行Shell，然后启动其它进程。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-i&nbsp;-t&nbsp;--entrypoint&nbsp;/bin/bash&nbsp;example/redis
#or&nbsp;two&nbsp;examples&nbsp;of&nbsp;how&nbsp;to&nbsp;pass&nbsp;more&nbsp;parameters&nbsp;to&nbsp;that&nbsp;ENTRYPOINT:
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-i&nbsp;-t&nbsp;--entrypoint&nbsp;/bin/bash&nbsp;example/redis&nbsp;-c&nbsp;ls&nbsp;-l
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-i&nbsp;-t&nbsp;--entrypoint&nbsp;/usr/bin/redis-cli&nbsp;example/redis&nbsp;--help
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;　&lt;/span&gt;**EXPOSE (incoming ports)**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;　　Dockefile在网络方面除了提供一个EXPOSE之外，没有提供其它选项。下面这些参数可以覆盖Dockefile的expose默认值：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
--expose=[]:&nbsp;Expose&nbsp;a&nbsp;port&nbsp;or&nbsp;a&nbsp;range&nbsp;of&nbsp;ports&nbsp;from&nbsp;the&nbsp;container
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;without&nbsp;publishing&nbsp;it&nbsp;to&nbsp;your&nbsp;host
-P=false&nbsp;&nbsp;&nbsp;:&nbsp;Publish&nbsp;all&nbsp;exposed&nbsp;ports&nbsp;to&nbsp;the&nbsp;host&nbsp;interfaces
-p=[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Publish&nbsp;a&nbsp;container᾿s&nbsp;port&nbsp;to&nbsp;the&nbsp;host&nbsp;(format:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip:hostPort:containerPort&nbsp;|&nbsp;ip::containerPort&nbsp;|
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hostPort:containerPort&nbsp;|&nbsp;containerPort)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(use&nbsp;&#39;docker&nbsp;port&#39;&nbsp;to&nbsp;see&nbsp;the&nbsp;actual&nbsp;mapping)
--link=&quot;&quot;&nbsp;&nbsp;:&nbsp;Add&nbsp;link&nbsp;to&nbsp;another&nbsp;container&nbsp;(name:alias)
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;　　--expose可以让容器接受外部传入的数据。容器内监听的端口不需要和外部主机的端口相同。比如说在容器内部，一个HTTP服务监听在80端口，对应外部主机的端口就可能是49880.&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;　　如果使用&lt;/span&gt;`-p`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;或者&lt;/span&gt;`-P`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;，那么容器会开放部分端口到主机，只要对方可以连接到主机，就可以连接到容器内部。当使用&lt;/span&gt;`-P`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;时，Docker会在主机中随机从49153 和65535之间查找一个未被占用的端口绑定到容器。你可以使用&lt;/span&gt;`docker port`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;来查找这个随机绑定端口。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;当你使用&lt;/span&gt;`--link`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;方式时，作为客户端的容器可以通过私有网络形式访问到这个容器。同时Docker会在客户端的容器中设定一些环境变量来记录绑定的IP和PORT。&lt;/span&gt;

**ENV (environment variables)**
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
HOME&nbsp;&nbsp;&nbsp;&nbsp;Set&nbsp;based&nbsp;on&nbsp;the&nbsp;value&nbsp;of&nbsp;USER
HOSTNAME&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;hostname&nbsp;associated&nbsp;with&nbsp;the&nbsp;container
PATH&nbsp;&nbsp;&nbsp;&nbsp;Includes&nbsp;popular&nbsp;directories,&nbsp;such&nbsp;as&nbsp;:
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
TERM&nbsp;&nbsp;&nbsp;&nbsp;xterm&nbsp;if&nbsp;the&nbsp;container&nbsp;is&nbsp;allocated&nbsp;a&nbsp;psuedo-TTY
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;当容器启动时，会自动在容器中初始化这些变量。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;操作人员可以通过&lt;/span&gt;`-e`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;来设定任意的环境变量，甚至覆盖已经存在的环境变量，或者是在Dockerfile中通过ENV设定的环境变量。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-e&nbsp;&quot;deep=purple&quot;&nbsp;--rm&nbsp;ubuntu&nbsp;/bin/bash&nbsp;-c&nbsp;export
declare&nbsp;-x&nbsp;HOME=&quot;/&quot;
declare&nbsp;-x&nbsp;HOSTNAME=&quot;85bc26a0e200&quot;
declare&nbsp;-x&nbsp;OLDPWD
declare&nbsp;-x&nbsp;PATH=&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;
declare&nbsp;-x&nbsp;PWD=&quot;/&quot;
declare&nbsp;-x&nbsp;SHLVL=&quot;1&quot;
declare&nbsp;-x&nbsp;container=&quot;lxc&quot;
declare&nbsp;-x&nbsp;deep=&quot;purple&quot;
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;操作人员可以通过&lt;/span&gt;`-h`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;来设定hostname。也可以使用&amp;quot;--link name:alias&amp;quot;来设定环境变量，当使用&lt;/span&gt;`--link`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;后，Docker将根据后面提供的IP和PORT信息来连接服务端容器。下面就是使用redis的例子：&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
#&nbsp;Start&nbsp;the&nbsp;service&nbsp;container,&nbsp;named&nbsp;redis-name
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-d&nbsp;--name&nbsp;redis-name&nbsp;dockerfiles/redis
4241164edf6f5aca5b0e9e4c9eccd899b0b8080c64c0cd26efe02166c73208f3

#&nbsp;The&nbsp;redis-name&nbsp;container&nbsp;exposed&nbsp;port&nbsp;6379
$&nbsp;sudo&nbsp;docker&nbsp;ps
CONTAINER&nbsp;ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IMAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COMMAND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CREATED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STATUS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PORTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NAMES
4241164edf6f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$&nbsp;dockerfiles/redis:latest&nbsp;&nbsp;&nbsp;/redis-stable/src/re&nbsp;&nbsp;&nbsp;5&nbsp;seconds&nbsp;ago&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Up&nbsp;4&nbsp;seconds&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6379/tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redis-name

#&nbsp;Note&nbsp;that&nbsp;there&nbsp;are&nbsp;no&nbsp;public&nbsp;ports&nbsp;exposed&nbsp;since&nbsp;we&nbsp;didn᾿t&nbsp;use&nbsp;-p&nbsp;or&nbsp;-P
$&nbsp;sudo&nbsp;docker&nbsp;port&nbsp;4241164edf6f&nbsp;6379
2014/01/25&nbsp;00:55:38&nbsp;Error:&nbsp;No&nbsp;public&nbsp;port&nbsp;&#39;6379&#39;&nbsp;published&nbsp;for&nbsp;4241164edf6f
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;你使用&lt;/span&gt;`--link`&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;后，就可以获取到关于Redis容器的相关信息。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;--rm&nbsp;--link&nbsp;redis-name:redis_alias&nbsp;--entrypoint&nbsp;/bin/bash&nbsp;dockerfiles/redis&nbsp;-c&nbsp;export
declare&nbsp;-x&nbsp;HOME=&quot;/&quot;
declare&nbsp;-x&nbsp;HOSTNAME=&quot;acda7f7b1cdc&quot;
declare&nbsp;-x&nbsp;OLDPWD
declare&nbsp;-x&nbsp;PATH=&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;
declare&nbsp;-x&nbsp;PWD=&quot;/&quot;
declare&nbsp;-x&nbsp;REDIS_ALIAS_NAME=&quot;/distracted_wright/redis&quot;
declare&nbsp;-x&nbsp;REDIS_ALIAS_PORT=&quot;tcp://172.17.0.32:6379&quot;
declare&nbsp;-x&nbsp;REDIS_ALIAS_PORT_6379_TCP=&quot;tcp://172.17.0.32:6379&quot;
declare&nbsp;-x&nbsp;REDIS_ALIAS_PORT_6379_TCP_ADDR=&quot;172.17.0.32&quot;
declare&nbsp;-x&nbsp;REDIS_ALIAS_PORT_6379_TCP_PORT=&quot;6379&quot;
declare&nbsp;-x&nbsp;REDIS_ALIAS_PORT_6379_TCP_PROTO=&quot;tcp&quot;
declare&nbsp;-x&nbsp;SHLVL=&quot;1&quot;
declare&nbsp;-x&nbsp;container=&quot;lxc&quot;
#And&nbsp;we&nbsp;can&nbsp;use&nbsp;that&nbsp;information&nbsp;to&nbsp;connect&nbsp;from&nbsp;another&nbsp;container&nbsp;as&nbsp;a&nbsp;client:
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-i&nbsp;-t&nbsp;--rm&nbsp;--link&nbsp;redis-name:redis_alias&nbsp;--entrypoint&nbsp;/bin/bash&nbsp;dockerfiles/redis&nbsp;-c&nbsp;&#39;/redis-stable/src/redis-cli&nbsp;-h&nbsp;$REDIS_ALIAS_PORT_6379_TCP_ADDR&nbsp;-p&nbsp;$REDIS_ALIAS_PORT_6379_TCP_PORT&#39;
172.17.0.32:6379&gt;
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;Docker也会将这个alias的IP地址写入到/etc/hosts文件中。然后你就可以通过别名来访问link后的容器。&lt;/span&gt;
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-d&nbsp;--name&nbsp;servicename&nbsp;busybox&nbsp;sleep&nbsp;30
$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-i&nbsp;-t&nbsp;--link&nbsp;servicename:servicealias&nbsp;busybox&nbsp;ping&nbsp;-c&nbsp;1&nbsp;servicealias
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;如果你重启了源容器（servicename），相关联的容器也会同步更新/etc/hosts。&lt;/span&gt;

**VOLUME (shared filesystems)**
</code></pre><pre class="prettyprint" style="margin: 0px 0px 10px; padding: 16px; border-radius: 3px; border: currentColor; border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 20px; text-indent: 0px; letter-spacing: normal; overflow: hidden; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; display: block; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(247, 247, 247); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;">
-v=[]:&nbsp;Create&nbsp;a&nbsp;bind&nbsp;mount&nbsp;with:&nbsp;[host-dir]:[container-dir]:[rw|ro].
&nbsp;&nbsp;&nbsp;If&nbsp;&quot;container-dir&quot;&nbsp;is&nbsp;missing,&nbsp;then&nbsp;docker&nbsp;creates&nbsp;a&nbsp;new&nbsp;volume.
--volumes-from=&quot;&quot;:&nbsp;Mount&nbsp;all&nbsp;volumes&nbsp;from&nbsp;the&nbsp;given&nbsp;container(s)
</pre>

<pre><code>&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;关于volume参数，可以在&lt;/span&gt;[Managing data in containers](https://docs.docker.com/userguide/dockervolumes/#volume-def)&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;查看详细说明，需要注意的是开发人员可以在Dockerfile中设定多个volume，但是只能由运维人员设置容器直接的volume访问。&lt;/span&gt;

**USER**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;容器中默认的用户是root，但是开发人员创建新的用户之后，这些新用户也是可以使用的。开发人员可以通过Dockerfile的USER设定默认的用户，并通过&amp;quot;-u &amp;quot;来覆盖这些参数。&lt;/span&gt;

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;　&lt;/span&gt;**WORKDIR**

&lt;span style=&quot;color: rgb(102, 102, 102); text-transform: none; line-height: 25.2px; text-indent: 0px; letter-spacing: normal; font-family: &amp;quot;Helvetica Neue&amp;quot;, STHeiti, &amp;quot;Microsoft YaHei&amp;quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; -ms-word-wrap: break-word; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px;&quot;&gt;容器中默认的工作目录是根目录（/）。开发人员可以通过Dockerfile的WORKDIR来设定默认工作目录，操作人员可以通过&amp;quot;-w&amp;quot;来覆盖默认的工作目录。&lt;/span&gt;

[http://www.lupaworld.com/article-250439-1.html](http://www.lupaworld.com/article-250439-1.html)
</code></pre></div>
    
      
      <div class="toc-wrapper">
        <div class="toc-scroll">
          <div class="toc-middle">
            
          </div>
        </div>
      </div>
    
  
</article>

      <footer class="footer">
  <p class="footer-text"></p>
</footer>

    </article>

    <script src="/js/to-top.js"></script>
    <script src="/js/search.js"></script>
  </body>
</html>
